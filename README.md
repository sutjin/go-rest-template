# go-rest-template
A production ready base template for GoLang REST using Gin

## Requirement

* [GoLang](https://golang.org/)
* [PostgreSql](https://www.postgresql.org/)

_developer note: you can use any other DB config by changing the implementation under __db/database.go___

## Installation

Building the application

```sh
$ go build -o bin/restapi main.go
```
Seeding the database
```sh
$ go run db/seed.go
```

## Run Local

```sh
$ go run main.go
```

### Running Unit Test

A local database needs to be installed in your computer with the right credential and test DB to be configured under `/test/init_test.go`

run the test with
```sh
$ go test -v ./test/...
```


## API Documentation

Documentation can be accessed via `http://localhost:8080/v1/api-docs`

### Auto Generate Swagger
Swagger documentation via code comment and autogenerated using [swaggo](https://github.com/swaggo/swag). Run the command below to generate documentation

```sh
$ swag init
```

## Running as Docker

Run the app as a Docker container by using the command below. __dev__ environment will copy the code over as a whole to allow unit testing while __prod__ environment is a compiled Go project with lower footprint.

dev env
```sh
$ docker build --target builder -t SOME_SERVICE:dev .
```
prod env
```sh
$ docker build -t SOME_SERVICE .
```

Run your image via
```sh
$ docker container run SOME_SERVICE:dev

or 

$ docker container run SOME_SERVICE
```

Akses via `http://<docker_ip>:8080`

## Additional Note

If you are interested in building this via a pipeline using Github (with unit test integration), you can follow along with here:

[Using A Database for Unit Testing With Docker in GitLab Pipeline](https://medium.com/geekculture/using-a-database-for-unit-testing-with-docker-in-gitlab-pipeline-c919121e25ef)